最近的几批滴滴滴的视频发完了 评论区却开始变味了很多人说 做到2025年了还在吹滴滴滴呢这就是骗老板的PPT技术 你落地全是死山骂的好如果你的滴滴滴只是为了换个项目结构 改几个内名或者凑或者落地几个概念确实该嘛但是不知道你们有没有想过一个问题啊java发展十几年了strat死了macad凉了tapsdream 估计很多人听都没听过 多少红吉一时的技术现在连骂都没人骂了那为什么滴滴滴这个03年代生的老国动被骂了20多年却依然活在各大互联网的主流技术论坛里呢仅仅只是因为他能吹牛吗不是因为他真的是有落地神计的只是很多互联网精英们却没怎么见过当然最主要的原因是没怎么关注过那这次呢我就不讲去头把脑袋的概念了但你看一套由实现领域驱动设计的作者张毅提出的零行架构看懂这张图你不仅能够打破滴滴滴无法落地的詛咒还能拥有随时切换单体和微服的上帝视角很多兄弟说滴滴滴我看过呀不就是用户层应用层领域层基础层这是层架构吗错如果你只停留在四层那你永远只能写出半吊子的滴滴滴真正的落地神机是对这四层进行灵活的拆解这样才能让滴滴滴从水土不服变得入乡随俗而这个用零行架构组织起来的七层对称架构就是一个最好的案例接下来我们就把这个结构详细解剖开看一看当然我只是近我所能进行分享真正感兴趣的朋友可以自己去网上找找网上资料多的是你说你找不到好吧往下划吧下个视频更适合你咱们从上往下看看灵行结构的上半部分是这个北向网关其实被拆成了三道防线第一道远层服务层不管是controller srpc provider或者是mq一部同性的subscriber都在这过一遍他只负责接客和四层架构中的应用层类式他不干活只是接入请求并调用下面的应用服务层第二道应用服务层他就是管家只负责编排流程同样不处理业务逻辑最关键的是第三道消息契约层但注意看中间这一块这也是很多团队最容易忽略的绝对不要把带有业务的领域对象直接对外暴露必须在这里转换成只有数据的DTO有了这层契约层外部不管怎么变内部的承载核心业务的核心领域都可以闻似不动接下来第四道就是最核心的领域层这里就进入了DDD四层架构的地盘了这里只需要关心最纯粹的核心业务逻辑也就是领域服务和聚合这些任何补充的具体实现比如数据库缓存中间键这些都是随时可以替换的扩展差跭关于四层架构之前单独分享过这里就不扩展了业务逻辑算完了结果怎么处理呢这时候就要走下半部分的南向网关负责向外输出结果先经过南向的消息契约层把数据打包从花梨胡哨的冲雪实体转成人人都能看懂的DTO然后到达端口层这里主要是基于这些只有数据的DTO定制数据输出的方式最后由适配器层去实现端口层定义的具体动作是要存数据会就完事了还是要发送MQ消息通知下有服务还是要用第三方的微服务全部在最外层的适配器层单独实现这叫做依赖道志主要还是保证不管外部环境怎么变中间的领域核心可以闻思不动看明白了吗每个领域处理完业务通过南向网关发出指令直接呼叫下一个领域的北向网关再进行下一个业务步骤如果是在单体架构里这就是基于适配器层和本地服务层的本地调用如果要拆成微服务也只需要把适配器层换成RPC的实现对接下一个领域的远程服务层就可以了甚至两天想换一种语言也可以基于MQ的一步结构进行协商中间的业务逻辑一行代码都不用改这就是临行结构的威力逻辑统一架构自由简单这我们把视角再拉高一点既然临行结构把业务内核和外部交互彻底分开了那如果我们通过一些通用的基础框架把所有的南北网关都封装成一些标准的接口中间这个领域层变成了什么呢它变成了一个集差机用的USB芯片这时候临写的代码不再是一次信号彩而是纯净了企业的领域仓库不管企业为了什么新业务不管你是什么技术背景单体的小型APP还是分布式的大型应用你需要订单能力去仓库里面拿需要库存能力去仓库里面拿这才是程序院的终极浪漫不重复造轮子只生产核心资产这其实也是各种强调高利率地有核的架构思想的共同目标当所有的核心业务都按照这种临行结构组织起来之后简单的小应用可以直接引入SDK作为本地的一个功能包分布式的大型应用可以直接调用内部的服务发现体系直接调用远端的服务能力甚至哪天不想用加碼了用购物语言开发也可以通过MQ的一步调用实现快速介入对于这样完整的临行结构来说要调整的就只是南北网关核心业务逻辑基本可以保持不动为什么滴滴滴这么多年依然经久不衰其实就是因为它迎合了分布式时代能力附用的钢叙它让你从鞋带码的变成了大业务的讲到这里这次的滴滴分享就差不多了我们从临行结构的七层解剖开始调到了单体与为服的统一看起来很高大上对吧但我也要泼一盆冷水理想很丰满现实很骨感不要觉得臭上了几个概念改了几个类名这就是在玩滴滴滴了更不要为了用滴滴滴而强行把简单的业务搞得复杂无比在那些花里胡骚的架构之外滴滴滴还有一个核心思想就是刚刚好解决当前的业务让所有人都能一眼看懂你的代码这很重要接下来关掉视频打开ID拿一个你手头最乱的功能模块试着用临行结构存购一下把散落在各处的业务逻辑收拢到领域层里来这种掌控代码的感觉比看100个短视频都要爽如果你想再进一步可以试试把本地功能扩展和远程浮调用你基础框架的形式整合起来一定让你有很大的惊喜相信我其实这不难只要你思路清晰用AI分分钟就能搞定当然滴滴滴并不一定就很好没有哪个架构是能包置百病的但你只要自己动手了才能够真正去理解它好在哪不好在哪如果它能给你带来一些思考不也好过在AI时代充满了弱智面识题的技术权盲我是东南IT路上一起进步